<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <title>EE Intake Artifacts</title>
  <script src="https://cdn.auth0.com/js/auth0/9.24.1/auth0.min.js"></script>
  <script>
    // Auth0 protection - redirect to login if not authenticated
    const auth0 = new auth0.WebAuth({
      domain: 'dev-etm8p8yhx6s75syc.auth0.com',
      clientID: 'T8rMJ51UJ6efeHrRauKN4x29jpvlRL85',
      redirectUri: window.location.origin,
      responseType: 'token id_token',
      scope: 'openid profile email'
    });

    // Check if user is authenticated
    const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';
    const accessToken = localStorage.getItem('access_token');
    
    if (!isAuthenticated || !accessToken) {
      // Not authenticated, redirect to Auth0 login
      auth0.authorize();
    }
    
    // Handle Auth0 callback (if returning from login)
    if (window.location.hash) {
      auth0.parseHash((err, authResult) => {
        if (authResult && authResult.accessToken) {
          localStorage.setItem('access_token', authResult.accessToken);
          localStorage.setItem('id_token', authResult.idToken);
          localStorage.setItem('isAuthenticated', 'true');
          window.location.hash = '';
          window.location.reload();
        }
      });
    }
  </script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; max-width: 900px; }
    a { color: #0b57d0; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .box { border: 1px solid #ddd; border-radius: 12px; padding: 14px; margin: 12px 0; }
    code { background: #f6f6f6; padding: 1px 4px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>EE Intake â€“ Published Artifacts</h1>
  <div class="box">
    <div><strong>Phase artifacts</strong>: <code>docs/phases/</code> (published)</div>
    <div><strong>Galleries</strong>: <code>docs/galleries/</code> (published)</div>
    <div><strong>Manifest</strong>: <code>docs/publish_manifest.json</code></div>
  </div>
  <div class="box">
    <div>Artifacts copied: <strong>57</strong></div>
    <div>Galleries generated: <strong>3</strong></div>
  </div>
  <ul>
    <li><a href="outline/index.html">Browse project outline (HTML)</a></li>
    <li><a href="galleries/index.html">Browse galleries</a></li>
    <li><a href="phases/index.html">Browse phases folder</a></li>
  </ul>
  <p>
    Note: This site is generated locally by <code>scripts/publish/publish_pages_site.py</code>.
    To update the project outline to point at these public URLs, run <code>scripts/publish/linkify_outline_public_urls.py</code>
    and then re-export the Word doc.
  </p>
</body>
</html>
